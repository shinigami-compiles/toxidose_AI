<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How It Works - ToxiDose AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/png" sizes="32x32"
      href="{{ url_for('static', filename='img/toxiDose_logo.ico') }}">
    <link rel="icon" type="image/png" sizes="16x16"
      href="{{ url_for('static', filename='img/toxidose-favicon-16.png') }}">

</head>
<body>
    <div id="background-animation"></div>
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-dialog">
            <div class="loading-gif">
                <img src="{{ url_for('static', filename='loading.gif') }}" alt="Loading...">
            </div>
            <div class="loading-message">Analyzing toxicity risk‚Ä¶</div>
        </div>
    </div>
    <nav>
        <div class="logo">
            <img 
                src="{{ url_for('static', filename='toxiDose_logo.png') }}" 
                alt="ToxiDose Logo" 
                class="nav-logo-img"
            >
            <span class="logo-text">ToxiDose AI</span>
        </div>
        <ul>
            <li>
                <a href="{{ url_for('landing') }}"
                   class="nav-link nav-link-tablet {% if request.endpoint == 'landing' %}active{% endif %}"
                   data-tablet-img="{{ url_for('static', filename='img/tablet-nav.png') }}">
                    Home
                </a>
            </li>
            <li>
                <a href="{{ url_for('how_it_works') }}"
                   class="nav-link nav-link-tablet {% if request.endpoint == 'how_it_works' %}active{% endif %}"
                   data-tablet-img="{{ url_for('static', filename='img/tablet-nav.png') }}">
                    Functions
                </a>
            </li>
            <li>
                <a href="{{ url_for('help_page') }}"
                   class="nav-link nav-link-tablet {% if request.endpoint == 'help_page' %}active{% endif %}"
                   data-tablet-img="{{ url_for('static', filename='img/tablet-nav.png') }}">
                    Help
                </a>
            </li>
        </ul>

    </nav>

    <div class="content-wrapper">
        <div class="info-page-container">
            <div class="page-header">
                <h1 class="page-title">How ToxiDose AI Works</h1>
                <p class="page-subtitle">
                    Our system combines pharmacological science with machine learning to predict 
                    risks that standard drug checkers might miss
                </p>
            </div>

            <!-- Step 1 -->
            <div class="process-step">
                <div class="step-number">
                    <span>1</span>
                </div>
                <div class="step-content">
                    <div class="step-icon-large"></div>
                    <h2 class="step-title">Pharmacological Knowledge Base</h2>

                    <div class="step-tag-row">
                        <span class="step-tag primary">Data Layer</span>
                        <span class="step-tag">Drug Weights</span>
                        <span class="step-tag">Organ Focused</span>
                    </div>

                    <p class="step-description">
                        The system starts with a curated database of common medicines. Each drug 
                        is assigned <strong>Toxicity Weights (0‚Äì3)</strong> for specific organs based 
                        on clinical pharmacology:
                    </p>
                    
                    <div class="drug-examples-grid">
                        <div class="drug-example-card">
                            <div class="drug-name">Paracetamol</div>
                            <div class="toxicity-bar">
                                <div class="tox-item high">
                                    <span class="tox-label">Liver:</span>
                                    <span class="tox-value">3/3</span>
                                </div>
                                <div class="tox-item low">
                                    <span class="tox-label">Kidney:</span>
                                    <span class="tox-value">1/3</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="drug-example-card">
                            <div class="drug-name">Ibuprofen</div>
                            <div class="toxicity-bar">
                                <div class="tox-item medium">
                                    <span class="tox-label">Kidney:</span>
                                    <span class="tox-value">2/3</span>
                                </div>
                                <div class="tox-item high">
                                    <span class="tox-label">GI Tract:</span>
                                    <span class="tox-value">3/3</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="drug-example-card">
                            <div class="drug-name">Cetirizine</div>
                            <div class="toxicity-bar">
                                <div class="tox-item safe">
                                    <span class="tox-label">Liver:</span>
                                    <span class="tox-value">0/3</span>
                                </div>
                                <div class="tox-item info">
                                    <span class="tox-label">Sedative:</span>
                                    <span class="tox-value">Yes</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="process-step">
                <div class="step-number">
                    <span>2</span>
                </div>
                <div class="step-content">
                    <div class="step-icon-large"></div>
                    <h2 class="step-title">Organ Load Calculation</h2>

                    <div class="step-tag-row">
                        <span class="step-tag primary">Clinical Logic</span>
                        <span class="step-tag">Dose √ó Organ</span>
                        <span class="step-tag success">Patient Factors</span>
                    </div>

                    <p class="step-description">
                        We don‚Äôt just count pills. We calculate the <strong>Effective Organ Load</strong> 
                        using a formula that considers dose intensity and patient vulnerabilities:
                    </p>
                    
                    <div class="formula-container">
                        <div class="formula-title">Core Formula</div>
                        <div class="formula-content">
                            <code>
                                Effective Load = (Drug Dose / Max Safe Dose) √ó Toxicity Weight √ó <span class="highlight">Vulnerability Factor</span>
                            </code>
                        </div>
                    </div>
                    
                    <div class="example-box">
                        <div class="example-title"> Example Calculation</div>
                        <p class="example-text">
                            A patient with <strong>Liver Disease</strong> has a Vulnerability Factor of 
                            <span class="highlight-number">3.0√ó</span> for liver-metabolized drugs. 
                            This means their effective load is 3 times higher than a healthy person!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="process-step">
                <div class="step-number">
                    <span>3</span>
                </div>
                <div class="step-content">
                    <div class="step-icon-large"></div>
                    <h2 class="step-title">Machine Learning Prediction</h2>

                    <div class="step-tag-row">
                        <span class="step-tag primary">Risk Engine</span>
                        <span class="step-tag">Random Forest</span>
                        <span class="step-tag success">Simulated Patients</span>
                    </div>

                    <p class="step-description">
                        The calculated loads and interaction flags are fed into a 
                        <strong>Random Forest Regressor</strong> trained on 10,000 synthetic patient profiles.
                    </p>
                    
                    <div class="ml-features">
                        <div class="ml-card">
                            <div class="ml-icon">‚ö°</div>
                            <div class="ml-title">Acute Risk Score</div>
                            <p>Predicts immediate overdose or toxicity events within 24-48 hours</p>
                        </div>
                        <div class="ml-card">
                            <div class="ml-icon">‚è≥</div>
                            <div class="ml-title">Cumulative Risk Score</div>
                            <p>Predicts long-term organ damage from sustained medication use</p>
                        </div>
                    </div>

                    <div class="info-callout">
                        <div class="callout-icon">üí°</div>
                        <div class="callout-content">
                            <div class="callout-title">Why Machine Learning?</div>
                            <p>
                                Traditional drug checkers use simple rule-based systems. Our ML model 
                                learns complex, non-linear interactions between dozens of factors that 
                                human experts might miss.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA Section -->
            <div class="cta-section">
                <h2 class="cta-title">Ready to Analyze Your Medications?</h2>
                <p class="cta-text">Get instant AI-powered risk assessment in under 60 seconds</p>
                <a href="/" class="cta-button-large">
                    <span class="btn-icon"></span>
                    <span>Start Analysis Now</span>
                </a>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p class="footer-warning">‚ö†Ô∏è Research Prototype - Not for Clinical Diagnosis</p>
            <p class="footer-copy">&copy; 2025 ToxiDose AI Project</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>